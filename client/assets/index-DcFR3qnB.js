import{w as y,u as N}from"./AuthContext-DfHXuJuK.js";import{r as i,l as e,p as w}from"./chunk-GNGMS2XR-BMTy4fC2.js";import{B as o,u as z,H as A,I as v}from"./index-BVoZK2f4.js";import{u as I}from"./TaskContext-D1HqtTa5.js";var S="pt0nz00",$="pt0nz01",q="pt0nz02",E="pt0nz03",L="pt0nz04",P="pt0nz05",M="pt0nz06";function _({task:a,toggleTask:t,deleteTask:l}){const r=i.useCallback(s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),t(a.id))},[a.id,t]),n=i.useCallback(()=>{t(a.id)},[a.id,t]),c=i.useCallback(s=>{s.stopPropagation(),l(a.id)},[a.id,l]);return e.jsxs("div",{className:q,"data-completed":a.completed,role:"listitem",tabIndex:0,onKeyDown:r,onClick:n,children:[e.jsxs("div",{className:E,children:[e.jsxs("label",{className:L,children:[e.jsx("input",{type:"checkbox",checked:a.completed,className:S,onChange:n,"aria-label":`Mark "${a.title}" as ${a.completed?"incomplete":"complete"}`}),e.jsx("span",{className:$,role:"presentation"})]}),e.jsxs("div",{children:[e.jsx("div",{className:P,"data-completed":a.completed,children:a.title}),e.jsxs("div",{className:M,"data-completed":a.completed,children:["Due: ",a.dueDate]})]})]}),e.jsx(o,{variant:"delete",onClick:c,"aria-label":`Delete task: ${a.title}`,children:"Delete"})]})}const B=i.memo(_);var F="_127hwef0",H="_127hwef1",K="_127hwef2";function O(){return[{title:"Tasks | React Task Manager"},{name:"description",content:"Manage and organize your tasks efficiently. Create, track, and complete tasks with our intuitive task management interface."}]}const Q=y(function(){var x,k;const[t,l]=i.useState("all"),[r,n]=i.useState(!1),{addTask:c,toggleTask:s,deleteTask:b,filterTasks:j}=I(),m=w(),{isAuthenticated:p}=N(),{register:u,handleSubmit:T,reset:g,formState:{errors:h}}=z();i.useEffect(()=>{p||m("/",{replace:!0})},[p,m]);const C=async d=>{try{n(!0),await c(d.title,d.dueDate),g()}catch(D){console.error(D)}finally{n(!1)}},f=j(t);return e.jsxs("main",{children:[e.jsx(A,{}),e.jsx("section",{"aria-label":"Add new task",children:e.jsxs("form",{onSubmit:T(C),className:F,"aria-label":"New task form",children:[e.jsx(v,{id:"title",type:"text",placeholder:"Task title",label:"Task Title",error:(x=h.title)==null?void 0:x.message,...u("title",{required:"Task title is required",minLength:{value:3,message:"Task title must be at least 3 characters"}})}),e.jsx(v,{id:"dueDate",type:"date",placeholder:"Due date",label:"Due Date",error:(k=h.dueDate)==null?void 0:k.message,...u("dueDate",{required:"Due date is required",pattern:{value:/^\d{4}-\d{2}-\d{2}$/,message:"Invalid date format"}})}),e.jsx(o,{as:"input",variant:"submit",disabled:r,"aria-busy":r,"aria-label":"Add Task",children:r?"Adding...":"Add Task"})]})}),e.jsx("section",{"aria-label":"Task filters",children:e.jsxs("div",{className:H,role:"toolbar","aria-label":"Task filter options",children:[e.jsx(o,{variant:"filter",active:t==="all",onClick:()=>l("all"),"aria-pressed":t==="all",children:"All Tasks"}),e.jsx(o,{variant:"filter",active:t==="pending",onClick:()=>l("pending"),"aria-pressed":t==="pending",children:"Pending Tasks"}),e.jsx(o,{variant:"filter",active:t==="completed",onClick:()=>l("completed"),"aria-pressed":t==="completed",children:"Completed Tasks"})]})}),e.jsx("section",{"aria-label":"Task list",children:e.jsx("div",{className:K,role:"list","aria-label":`${t} tasks`,children:f.length===0?e.jsx("p",{role:"status",children:"No tasks found."}):f.map(d=>e.jsx(B,{task:d,toggleTask:s,deleteTask:b},d.id))})})]})});export{Q as default,O as meta};
