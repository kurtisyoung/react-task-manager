import{w as N,u as y}from"./AuthContext-DfHXuJuK.js";import{r as l,l as e,p as w}from"./chunk-GNGMS2XR-BMTy4fC2.js";import{B as o,u as z,H as A,I as k}from"./index-Dp0ma3qv.js";import{u as I}from"./TaskContext-D1HqtTa5.js";var S="pt0nz00",$="pt0nz01",q="pt0nz02",E="pt0nz03",L="pt0nz04",P="pt0nz05",_="pt0nz06";function B({task:a,toggleTask:t,deleteTask:r}){const i=l.useCallback(s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),t(a.id))},[a.id,t]),n=l.useCallback(()=>{t(a.id)},[a.id,t]),c=l.useCallback(s=>{s.stopPropagation(),r(a.id)},[a.id,r]);return e.jsxs("div",{className:q,"data-completed":a.completed,role:"listitem",tabIndex:0,onKeyDown:i,onClick:n,children:[e.jsxs("div",{className:E,children:[e.jsxs("label",{className:L,children:[e.jsx("input",{type:"checkbox",checked:a.completed,className:S,onChange:n,"aria-label":`Mark "${a.title}" as ${a.completed?"incomplete":"complete"}`}),e.jsx("span",{className:$,role:"presentation"})]}),e.jsxs("div",{children:[e.jsx("div",{className:P,"data-completed":a.completed,children:a.title}),e.jsxs("div",{className:_,"data-completed":a.completed,children:["Due: ",a.dueDate]})]})]}),e.jsx(o,{variant:"delete",onClick:c,"aria-label":`Delete task: ${a.title}`,children:"Delete"})]})}const F=l.memo(B);var H="_127hwef0",K="_127hwef1",M="_127hwef2";function O(){return[{title:"Tasks | React Task Manager"}]}const Q=N(function(){var f,v;const[t,r]=l.useState("all"),[i,n]=l.useState(!1),{addTask:c,toggleTask:s,deleteTask:b,filterTasks:j}=I(),p=w(),{isAuthenticated:m}=y(),{register:u,handleSubmit:T,reset:g,formState:{errors:h}}=z();l.useEffect(()=>{m||p("/",{replace:!0})},[m,p]);const C=async d=>{try{n(!0),await c(d.title,d.dueDate),g()}catch(D){console.error(D)}finally{n(!1)}},x=j(t);return e.jsxs("main",{children:[e.jsx(A,{}),e.jsx("section",{"aria-label":"Add new task",children:e.jsxs("form",{onSubmit:T(C),className:H,"aria-label":"New task form",children:[e.jsx(k,{id:"title",type:"text",placeholder:"Task title",label:"Task Title",error:(f=h.title)==null?void 0:f.message,...u("title",{required:"Task title is required",minLength:{value:3,message:"Task title must be at least 3 characters"}})}),e.jsx(k,{id:"dueDate",type:"date",placeholder:"Due date",label:"Due Date",error:(v=h.dueDate)==null?void 0:v.message,...u("dueDate",{required:"Due date is required",pattern:{value:/^\d{4}-\d{2}-\d{2}$/,message:"Invalid date format"}})}),e.jsx(o,{as:"input",variant:"submit",disabled:i,"aria-busy":i,"aria-label":"Add Task",children:i?"Adding...":"Add Task"})]})}),e.jsx("section",{"aria-label":"Task filters",children:e.jsxs("div",{className:K,role:"toolbar","aria-label":"Task filter options",children:[e.jsx(o,{variant:"filter",active:t==="all",onClick:()=>r("all"),"aria-pressed":t==="all",children:"All Tasks"}),e.jsx(o,{variant:"filter",active:t==="pending",onClick:()=>r("pending"),"aria-pressed":t==="pending",children:"Pending Tasks"}),e.jsx(o,{variant:"filter",active:t==="completed",onClick:()=>r("completed"),"aria-pressed":t==="completed",children:"Completed Tasks"})]})}),e.jsx("section",{"aria-label":"Task list",children:e.jsx("div",{className:M,role:"list","aria-label":`${t} tasks`,children:x.length===0?e.jsx("p",{role:"status",children:"No tasks found."}):x.map(d=>e.jsx(F,{task:d,toggleTask:s,deleteTask:b},d.id))})})]})});export{Q as default,O as meta};
