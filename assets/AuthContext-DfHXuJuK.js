import{v as p,w as l,x as m,y as h,r,z as w,l as A}from"./chunk-GNGMS2XR-BMTy4fC2.js";function P(e){return function(){const t={params:h(),loaderData:m(),actionData:l(),matches:p()};return r.createElement(e,t)}}function S(e){return function(){const t={params:h(),loaderData:m(),actionData:l(),error:w()};return r.createElement(e,t)}}let u=0;const E=1e3,c=(e,s)=>{const t=Date.now();return t-u<E?Promise.reject(new Error("Rate limit exceeded. Please wait before making another request.")):(u=t,new Promise(a=>{setTimeout(()=>{a({action:e,data:s,status:"success"})},500)}))},d=r.createContext(null);function y({children:e}){const[s,t]=r.useState(()=>typeof sessionStorage<"u"?(sessionStorage==null?void 0:sessionStorage.getItem("isAuthenticated"))==="true":!1);r.useEffect(()=>{sessionStorage.getItem("isAuthenticated")==="true"&&t(!0)},[]);const a=r.useCallback(async(o,n)=>{if(o&&n)try{await c("login",{email:o,password:n}),sessionStorage.setItem("isAuthenticated","true"),sessionStorage.setItem("user",JSON.stringify({email:o,password:n})),t(!0)}catch(g){throw console.error("Login failed:",g),new Error("Failed to login. Please try again.")}else throw new Error("Invalid credentials")},[]),i=r.useCallback(async()=>{try{await c("logout",{}),sessionStorage.removeItem("isAuthenticated"),sessionStorage.removeItem("user"),t(!1)}catch(o){throw console.error("Logout failed:",o),new Error("Failed to logout. Please try again.")}},[]),f=r.useMemo(()=>({isAuthenticated:s,login:a,logout:i}),[s,a,i]);return A.jsx(d.Provider,{value:f,children:e})}function v(){const e=r.useContext(d);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}export{y as A,S as a,c as s,v as u,P as w};
